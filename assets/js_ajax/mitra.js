function sweet(e,t,a,i){swal({title:e,text:t,imageUrl:base_url+"assets/images/sweet_alert/"+a,imageSize:"180x180",allowOutsideClick:!0},function(){window.location.href=i})}function sweetReview(e,t,a,i){swal({title:e,text:t,imageUrl:base_url+"assets/images/sweet_alert/"+a,imageSize:"180x180",allowOutsideClick:!0},function(){viewRewiew()})}function readURL(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$("#tampil").attr("src",e.target.result)},t.readAsDataURL(e.files[0])}}function searchFilter(e){e=e?e:0;var t=$("#cat1").val(),a=$("#cat2").val(),i=$("#cat3").val(),s=$("#showOn").val(),n=$("#keywords").val(),r=$("#sortBy").val();$.ajax({type:"POST",url:base_url+"mitra/item_filter/"+e,data:"page="+e+"&keywords="+n+"&sortBy="+r+"&show="+s+"&cat1="+t+"&cat2="+a+"&cat3="+i,beforeSend:function(){$(".product-list").hide(),$(".loading").show()},success:function(e){$(".loading").hide(),$(".product-list").html(e),$(".product-list").show()}})}function viewRewiew(e){e=e?e:0;var t=$("#id_item").val();$.ajax({type:"POST",url:base_url+"mitra/item_review/"+e,data:"page="+e+"&id="+t,beforeSend:function(){$("#Reviews").hide(),$(".loading").show()},success:function(e){$(".loading").hide(),$("#Reviews").html(e),$("#Reviews").show()}})}function add_to_catalog(e){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_add_to_catalog",data:"id_item="+e,beforeSend:function(){$("#add_to_catalog").button("loading")},success:function(e){0==e.error?sweet(e.title,e.pesan,"true.jpg","#"):($("#add_to_catalog").button("reset"),sweet(e.title,e.pesan,"false.jpg","#"))}})}$(document).ready(function(){var e=$("#cat1").val(),t=$("#cat2").val(),a=$("#cat3").val();$("#keywords").autocomplete({minLength:2,source:base_url+"mitra/autocomplete_item/"+e+"/"+t+"/"+a}),$("#btn_search").click(function(){searchFilter()}),$("#keywords").keypress(function(e){13==e.which&&searchFilter()}),$("#sortBy").change(function(){searchFilter()}),$("#showOn").change(function(){searchFilter()}),$("#add_review").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_add_review",data:$("#form_add").serialize(),beforeSend:function(){$("#add_review").button("loading")},success:function(e){0==e.error?($("#add_review").button("reset"),$("#form_add").trigger("reset"),sweetReview(e.title,e.pesan,"true.jpg","#")):sweet(e.title,e.pesan,"false.jpg","#")}})}),$("#btn_edit_user").click(function(){var e=(new FormData($("form_add")[0]),new FormData),t=$("#foto")[0].files[0];e.append("foto",t),$.each($("#form_edit_user").serializeArray(),function(t,a){e.append(a.name,a.value)}),$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_edit_user",data:e,processData:!1,contentType:!1,beforeSend:function(){$("#btn_edit_user").button("loading")},success:function(e){0==e.error?($("#btn_edit_user").button("reset"),sweet(e.title,e.pesan,"true.jpg","mitra")):($("#btn_edit_user").button("reset"),sweet(e.title,e.pesan,"false.jpg","#"))}})}),$("#foto").change(function(){readURL(this)}),$("#btn_edit_pass").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_edit_pass",data:$("#form_edit_pass").serialize(),beforeSend:function(){$("#btn_edit_pass").button("loading")},success:function(e){0==e.error?($("#btn_edit_pass").button("reset"),sweet(e.title,e.pesan,"true.jpg","#")):($("#btn_edit_pass").button("reset"),sweet(e.title,e.pesan,"false.jpg","#"))}})}),$("#btn_add_catalog").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_add_catalog",data:$("#form_add").serialize(),beforeSend:function(){$("#btn_add_catalog").button("loading")},success:function(e){0==e.error?($("#form_add").trigger("reset"),sweet(e.title,e.pesan,"true.jpg","mitra")):($("#btn_add_catalog").button("reset"),sweet(e.title,e.pesan,"false.jpg","#"))}})})});