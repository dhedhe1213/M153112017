function sweet(a,t,e,n){swal({title:a,text:t,imageUrl:base_url+"assets/images/sweet_alert/"+e,imageSize:"180x180",allowOutsideClick:!0},function(){window.location.href=n})}function sweet_catalog_review(a,t,e,n){swal({title:a,text:t,imageUrl:base_url+"assets/images/sweet_alert/"+e,imageSize:"180x180",allowOutsideClick:!0},function(){viewRewiewCatalog()})}function searchFilter(a){a=a?a:0;var t=$("#nm_catalog").val(),e=$("#showOn").val(),n=$("#keywords").val(),i=$("#sortBy").val();$.ajax({type:"POST",url:base_url+"mitra/catalog_filter/"+a,data:"page="+a+"&keywords="+n+"&sortBy="+i+"&show="+e+"&nm_catalog="+t,beforeSend:function(){$(".product-list").hide(),$(".loading").show()},success:function(a){$(".loading").hide(),$(".product-list").html(a),$(".product-list").show()}})}function viewRewiewCatalog(a){a=a?a:0;var t=$("#nm_catalog").val();$.ajax({type:"POST",url:base_url+"mitra/catalog_review/"+a,data:"page="+a+"&nm_catalog="+t,beforeSend:function(){$("#Reviews").hide(),$(".loading-catalog").show()},success:function(a){$(".loading-catalog").hide(),$("#Reviews").html(a),$("#Reviews").show()}})}function add_to_cart(a){var t=$("#nm_catalog").val();$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_add_to_cart",data:"id_item="+a+"&nm_catalog="+t,beforeSend:function(){$(".add2cart").button("loading")},success:function(a){0==a.error?($(".add2cart").button("reset"),loadCountCart(),sweet(a.title,a.pesan,"true.jpg","#")):($(".add2cart").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}function loadCatalogCart(){$.ajax({type:"GET",url:base_url+"mitra/catalog_cart_load",success:function(a){$(".goods-page").html(a)}})}function loadCountCart(){$.ajax({type:"GET",url:base_url+"mitra/catalog_count_cart",success:function(a){$(".top-cart-info").html(a)}})}function deleteAlamat(a){swal({title:"Are you sure?",text:"You will not be able to recover this record!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(t){t&&actDeleteAlamat(a)})}function actDeleteAlamat(a){var t=base_url+"mitra/deleteAlamat/"+a;$.ajax({type:"DELETE",dataType:"JSON",url:t,success:function(a){0==a.error?(loadAlamat(),$(".alamat_checkout").html(""),sweet(a.title,a.pesan,"true.jpg","#")):sweet(a.title,a.pesan,"false.jpg","#")}})}function deleteCart(a){swal({title:"Are you sure?",text:"You will not be able to recover this record!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!0},function(t){t&&actDeleteCart(a)})}function actDeleteCart(a){var t=base_url+"mitra/deleteCart/"+a;$.ajax({type:"DELETE",dataType:"JSON",url:t,success:function(a){0==a.error?(loadCountCart(),loadCatalogCart(),sweet(a.title,a.pesan,"true.jpg","#")):sweet(a.title,a.pesan,"false.jpg","#")}})}function loadAlamat(){$.ajax({type:"GET",url:base_url+"mitra/getDataAlamat",beforeSend:function(){},success:function(a){$("#select_alamat").html(a)}})}$(document).ready(function(){var a=$("#nm_catalog").val();$("#keywords").autocomplete({minLength:2,source:base_url+"mitra/autocomplete_catalog/"+a}),$("#btn_search").click(function(){searchFilter()}),$("#keywords").keypress(function(a){13==a.which&&searchFilter()}),$("#sortBy").change(function(){searchFilter()}),$("#showOn").change(function(){searchFilter()}),$("#add_review").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_replay_review",data:$("#form_add").serialize(),beforeSend:function(){$("#add_review").button("loading")},success:function(a){0==a.error?($("#form_add").trigger("reset"),$("#add_review").button("reset"),sweet_catalog_review(a.title,a.pesan,"true.jpg","#")):($("#add_review").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}),$(document).on("click",".edit-jumlah",function(a){id_item=$(this).attr("data-id"),nama=$(this).attr("data-nama"),jumlah=$(this).attr("data-jumlah"),$("#ModalJumlah").modal("show"),$("#id_item").val(id_item),$("#jumlah").val(jumlah),$("#nama").val(nama)}),$("#btn-ubah-jumlah").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_edit_jumlah",data:$("#form-edit-jumlah").serialize(),beforeSend:function(){$("#btn-ubah-jumlah").button("loading")},success:function(a){0==a.error?($("#btn-ubah-jumlah").button("reset"),$("#ModalJumlah").modal("hide"),loadCatalogCart(),sweet(a.title,a.pesan,"true.jpg","#")):($("#btn-ubah-jumlah").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}),$("#select_alamat").change(function(){$.ajax({type:"POST",url:base_url+"mitra/getAlamat",data:$("#form_alamat").serialize(),beforeSend:function(){},success:function(a){$(".alamat_checkout").html(a)}})}),$("#tambah_alamat").click(function(){$("#ModalTambahAlamat").modal("show"),$("#kd_pos_tambah").hide()}),$(".tambah_kode").click(function(){$("#kd_pos").empty(),$("#kd_pos_default").hide(),$("#kd_pos_tambah").show()}),$("#tutup").click(function(){$("#kd_pos_default").show(),nm_kec=$("#kecamatan").val(),$.ajax({type:"POST",url:base_url+"mitra/getPos",data:"kecamatan="+nm_kec,beforeSend:function(){},success:function(a){$("#kd_pos").html(a)}}),$("#kd_tambah").val("")}),$("#provinsi").change(function(){id_prov=$("#provinsi").val(),$.ajax({type:"POST",url:base_url+"mitra/getKabupaten",data:"id="+id_prov,beforeSend:function(){},success:function(a){$("#kabupaten").html(a)}})}),$("#kabupaten").change(function(){id_kab=$("#kabupaten").val(),$.ajax({type:"POST",url:base_url+"mitra/getKecamatan",data:"id="+id_kab,beforeSend:function(){},success:function(a){$("#kecamatan").html(a)}})}),$("#kecamatan").change(function(){nm_kec=$("#kecamatan").val(),$.ajax({type:"POST",url:base_url+"mitra/getPos",data:"kecamatan="+nm_kec,beforeSend:function(){},success:function(a){$("#kd_pos").html(a)}})}),$("#btn-tambah-alamat").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_tambah_alamat",data:$("#form-tambah-alamat").serialize(),beforeSend:function(){$("#btn-tambah-alamat").button("loading")},success:function(a){0==a.error?($("#btn-tambah-alamat").button("reset"),$("#ModalTambahAlamat").modal("hide"),loadAlamat(),sweet(a.title,a.pesan,"true.jpg","#")):($("#btn-tambah-alamat").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}),$("#btn-konfirmasi").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_konfirmasi",data:$("#form-konfirmasi").serialize(),beforeSend:function(){$("#btn-konfirmasi").button("loading")},success:function(a){0==a.error?(sweet(a.title,a.pesan,"true.jpg",a.link),$("#ModalKonfirmasi").modal("hide")):($("#btn-konfirmasi").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}),$("#btn-terima-barang").click(function(){$.ajax({type:"POST",dataType:"JSON",url:base_url+"mitra/act_konfirmasi_terima",data:$("#form-konfirmasi").serialize(),beforeSend:function(){$("#btn-terima-barang").button("loading")},success:function(a){0==a.error?(sweet(a.title,a.pesan,"true.jpg",a.link),$("#ModalKonfirmasi").modal("hide")):($("#btn-terima-barang").button("reset"),sweet(a.title,a.pesan,"false.jpg","#"))}})}),$(document).delegate(".delete_alamat","click",function(){id=$(".delete_alamat").attr("data-id"),deleteAlamat(id)}),$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}};$("#t_konfirmasi").dataTable(),$("#t_pengiriman").dataTable(),$("#daftar_transaksi").dataTable(),$("#riwayat_transaksi").dataTable({initComplete:function(){var a=this.api();$("#t_konfirmasi_filter input").off(".DT").on("keyup.DT",function(t){13==t.keyCode&&a.search(this.value).draw()})},oLanguage:{sProcessing:"loading..."},processing:!0,serverSide:!0,ajax:{url:base_url+"mitra/load_tb_riwayat_transaksi",type:"POST"},columns:[{data:"id",orderable:!1},{data:"no_invoice"},{data:"total_pembayaran"},{data:"batas_waktu"}],order:[[1,"asc"]],rowCallback:function(a,t,e){var n=this.fnPagingInfo(),i=n.iPage,o=n.iLength,l=i*o+(e+1);$("td:eq(0)",a).html(l)}})});